describe("In Mahjong", function () {
    var OK = true;
    var ILLEGAL = false;
    var X_ZHUA_TURN = 0;
    var X_DA_TURN = 0;
    var O_ZHUA_TURN = 1;
    var O_DA_TURN = 1;
    var NO_ONE_TURN = -1;
    var NO_ONE_WINS = null;
    var X_WIN_SCORES = [1, 0];
    var O_WIN_SCORES = [0, 1];
    var TIE_SCORES = [0, 0];
    var INITIAL_BOARD = {
        stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 26],
        px: {
            hand: [0, 0, 3, 9, 13, 13, 14, 20, 20, 21, 22, 23, 26],
            open: []
        },
        po: {
            hand: [0, 1, 1, 3, 6, 10, 11, 17, 19, 20, 24, 30, 30],
            open: []
        },
        legalMove: [0, 0, 0, 0, 0, 1, 0],
        out: [],
        turn: -1
    };
    function expectMove(isOk, turnIndexBeforeMove, boardBeforeMove, pai, movetype, boardAfterMove, turnIndexAfterMove, endMatchScores) {
        var stateTransition = {
            turnIndexBeforeMove: turnIndexBeforeMove,
            stateBeforeMove: boardBeforeMove ? { board: boardBeforeMove, delta: null } : null,
            move: {
                endMatchScores: endMatchScores,
                turnIndexAfterMove: turnIndexAfterMove,
                stateAfterMove: { delta: { pai: pai, movetype: movetype }, board: boardAfterMove }
            },
            numberOfPlayers: null
        };
        if (isOk) {
            gameLogic.checkMoveOk(stateTransition);
        }
        else {
            // We expect an exception to be thrown :)
            var didThrowException = false;
            try {
                gameLogic.checkMoveOk(stateTransition);
            }
            catch (e) {
                didThrowException = true;
            }
            if (!didThrowException) {
                throw new Error("We expect an illegal move, but checkMoveOk didn't throw any exception!");
            }
        }
    }
    it("Player X make move ZHUA after initiallize is legal", function () {
        expectMove(OK, 0, INITIAL_BOARD, 15, 5, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [0, 0, 3, 9, 13, 13, 14, 20, 20, 21, 22, 23, 26, 15],
                open: []
            },
            po: {
                hand: [0, 1, 1, 3, 6, 10, 11, 17, 19, 20, 24, 30, 30],
                open: []
            },
            legalMove: [0, 0, 0, 0, 0, 0, 1],
            out: [],
            turn: 0
        }, 0, NO_ONE_WINS);
    });
    it("Player X make move Da after ZHUA is legal", function () {
        expectMove(OK, 0, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [0, 0, 3, 9, 13, 13, 14, 15, 20, 20, 21, 22, 23, 26],
                open: []
            },
            po: {
                hand: [0, 1, 1, 3, 6, 10, 11, 17, 19, 20, 24, 30, 30],
                open: []
            },
            legalMove: [0, 0, 0, 0, 0, 0, 1],
            out: [],
            turn: 0
        }, 21, 6, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [0, 0, 3, 9, 13, 13, 14, 15, 20, 20, 22, 23, 26],
                open: []
            },
            po: {
                hand: [0, 1, 1, 3, 6, 10, 11, 17, 19, 20, 24, 30, 30],
                open: []
            },
            legalMove: [0, 0, 1, 0, 0, 1, 0],
            out: [21],
            turn: 1
        }, 1, NO_ONE_WINS);
    });
    it("Player O make move CHI after DA by X is legal", function () {
        expectMove(OK, 1, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [0, 0, 3, 9, 13, 13, 14, 15, 20, 20, 22, 23, 26],
                open: []
            },
            po: {
                hand: [0, 1, 1, 3, 6, 10, 11, 17, 19, 20, 24, 30, 30],
                open: []
            },
            legalMove: [0, 0, 1, 0, 0, 1, 0],
            out: [21],
            turn: 1
        }, 21, 2, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [0, 0, 3, 9, 13, 13, 14, 15, 20, 20, 22, 23, 26],
                open: []
            },
            po: {
                hand: [0, 1, 1, 3, 6, 10, 11, 17, 24, 30, 30],
                open: [19, 20, 21]
            },
            legalMove: [0, 0, 0, 0, 0, 0, 1],
            out: [],
            turn: 2
        }, O_DA_TURN, NO_ONE_WINS);
    });
    it("Player O make move PENG after DA by X is legal", function () {
        expectMove(OK, O_ZHUA_TURN, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [0, 1, 1, 3, 6, 10, 11, 17, 19, 21, 24, 30, 30],
                open: []
            },
            po: {
                hand: [0, 0, 3, 9, 13, 13, 14, 15, 20, 20, 22, 23, 26],
                open: []
            },
            legalMove: [0, 0, 0, 1, 0, 1, 0],
            out: [20],
            turn: 1
        }, 20, 3, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [0, 1, 1, 3, 6, 10, 11, 17, 19, 21, 24, 30, 30],
                open: []
            },
            po: {
                hand: [0, 0, 3, 9, 13, 13, 14, 15, 22, 23, 26],
                open: [20, 20, 20]
            },
            legalMove: [0, 0, 0, 0, 0, 0, 1],
            out: [],
            turn: 2
        }, O_DA_TURN, NO_ONE_WINS);
    });
    it("Player O make move HU after DA by X is legal", function () {
        expectMove(OK, O_ZHUA_TURN, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [1, 1, 3, 3, 6, 9, 10, 11, 13, 17, 19, 21, 24, 26],
                open: []
            },
            po: {
                hand: [0, 0, 0, 13, 14, 15, 20, 20, 22, 23, 24, 30, 30],
                open: []
            },
            legalMove: [0, 0, 0, 1, 1, 1, 0],
            out: [20],
            turn: 1
        }, 20, 4, {
            stock: [2, 92, 80, 15, 7, 98, 122, 13, 3, 81, 53, 106, 76, 6, 41, 71, 59, 54, 87, 89, 47, 1, 25, 121, 38, 83, 60, 37, 58, 24, 8, 28, 94, 84, 118, 44, 108, 20, 57, 51, 11, 77, 129, 39, 62, 115, 40, 117, 78, 75, 72, 112, 67, 61, 128, 69, 85, 5, 104, 19, 70, 124, 23, 10, 46, 16, 100, 68, 74, 9, 123, 63, 131, 50, 111, 135, 29, 107, 34, 88, 21, 32, 31, 82, 30, 42, 14, 90, 49, 134, 22, 27, 86, 132, 56, 35, 96, 45, 52, 91, 66, 43, 102, 99, 79, 116, 97, 109, 133, 110, 126, 113, 17, 33, 0, 36, 127, 103, 95, 64, 125, 130, 93, 73, 18, 65, 120, 105, 101, 4, 55, 119, 114, 12, 26, 48, 27],
            px: {
                hand: [1, 1, 3, 3, 6, 9, 10, 11, 13, 17, 19, 21, 24, 26],
                open: []
            },
            po: {
                hand: [0, 0, 0, 13, 14, 15, 20, 20, 22, 23, 24, 30, 30],
                open: []
            },
            legalMove: [0, 0, 0, 0, 0, 0, 1],
            out: [20],
            turn: -1
        }, NO_ONE_TURN, O_WIN_SCORES);
    });
});
//# sourceMappingURL=gameLogic_test.js.map